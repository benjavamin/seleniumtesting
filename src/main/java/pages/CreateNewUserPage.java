package pages;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;

import java.util.Random;

public class CreateNewUserPage extends BasePage{

    By emailTextFieldSearch = By.xpath("/html[1]/body[1]/teamo-root[1]/div[1]/mat-sidenav-container[1]/mat-sidenav-content[1]/div[2]/teamo-create-user[1]/div[1]/mat-card[1]/mat-card-content[1]/form[1]/p[2]/mat-form-field[1]/div[1]/div[1]/div[1]/input[1]");
    By nameTextFieldSearch = By.xpath("/html[1]/body[1]/teamo-root[1]/div[1]/mat-sidenav-container[1]/mat-sidenav-content[1]/div[2]/teamo-create-user[1]/div[1]/mat-card[1]/mat-card-content[1]/form[1]/p[3]/mat-form-field[1]/div[1]/div[1]/div[1]/input[1]");
    By lastNameTextFieldSearch = By.xpath("/html[1]/body[1]/teamo-root[1]/div[1]/mat-sidenav-container[1]/mat-sidenav-content[1]/div[2]/teamo-create-user[1]/div[1]/mat-card[1]/mat-card-content[1]/form[1]/p[4]/mat-form-field[1]/div[1]/div[1]/div[1]/input[1]");
    By pwTextFieldSearch = By.id("autogeneratedPassword");
    By rolesSectionSearch = By.xpath("/html[1]/body[1]/teamo-root[1]/div[1]/mat-sidenav-container[1]/mat-sidenav-content[1]/div[2]/teamo-create-user[1]/div[1]/mat-card[1]/mat-card-content[1]/form[1]/mat-expansion-panel[1]/mat-expansion-panel-header[1]");
    By rolesDropDownFieldSearch = By.xpath("/html[1]/body[1]/teamo-root[1]/div[1]/mat-sidenav-container[1]/mat-sidenav-content[1]/div[2]/teamo-create-user[1]/div[1]/mat-card[1]/mat-card-content[1]/form[1]/mat-expansion-panel[1]/div[1]/div[1]/form[1]/p[1]/mat-form-field[1]/div[1]/div[1]/div[1]");
    By firstRoleSearch = By.xpath("/html[1]/body[1]/div[2]/div[2]/div[1]/div[1]/mat-option[1]/span[1]");
    By firstOrgSearch = By.xpath("//span[contains(text(),'Pragmatio solutions')]");
    By orgDropDownFieldSearch = By.xpath("/html[1]/body[1]/teamo-root[1]/div[1]/mat-sidenav-container[1]/mat-sidenav-content[1]/div[2]/teamo-create-user[1]/div[1]/mat-card[1]/mat-card-content[1]/form[1]/mat-expansion-panel[1]/div[1]/div[1]/form[1]/p[2]/mat-form-field[1]/div[1]/div[1]");
    By addRoleBtnSearch = By.xpath("//mat-icon[text()='control_point']");
    By createBtnSearch = By.xpath("//text()[.='Create']/ancestor::button[1]");

    public CreateNewUserPage(WebDriver driver){
        super(driver);
    }

    public void enterEmail(String input){
        writeText(emailTextFieldSearch, input);
    }

    public void enterEmail(){
        Random r = new Random();
        String generatedMail = "testing" + ((char)r.nextInt(255)) + "@mail.com";
        writeText(emailTextFieldSearch, generatedMail);
    }

    public void enterName(String input){
        writeText(nameTextFieldSearch, input);
    }

    public void enterLastName(String input){
        writeText(lastNameTextFieldSearch, input);
    }

    public void enterPassword(String input){
        writeText(pwTextFieldSearch, input);
    }

    public void expandRolesSection(){
        scrollToElement(rolesSectionSearch);
        click(rolesSectionSearch);
    }

    public void openRoleSelect(){
        click(rolesDropDownFieldSearch);
    }

    public void selectRole(){
        click(firstRoleSearch);
    }

    public void openOrgSelect(){
        click(orgDropDownFieldSearch);
    }

    public void selectOrganisation(){
        waitForElementToAppear(firstOrgSearch);
        click(firstOrgSearch);
    }

    public void clickAddRoleBtn(){
        click(addRoleBtnSearch);
    }

    public void clickCreateBtn(){
        scrollToElement(createBtnSearch);
        click(createBtnSearch);
    }
}
